+-------------------------------------------------------------+
|                          FRONTEND                           |
|                     (Next.js + Clerk Auth)                  |
|-------------------------------------------------------------|
| - Landing Page (SAI - Smart AI Interviewer)                 |
| - Chat (text + audio)                                       |
| - WebRTC (video prompts)                                    |
| - Monaco Coding IDE                                         |
| - Excalidraw Whiteboard                                     |
| - WebSocket Client                                          |
+-------------------------+-----------------------------------+
                          |
                          | JWT + HTTPS / WebSocket
                          v
+-------------------------------------------------------------+
|                   FASTAPI BACKEND API GATEWAY               |
|-------------------------------------------------------------|
| - Clerk JWT Verification                                    |
| - Session Manager                                           |
| - PDF Upload & Processing                                   |
| - RAG Query Endpoints                                       |
| - Model Router (Light LLM <-> Gemini)                       |
| - Observability (logs, metrics)                             |
| - InSessionMemory Controller                                |
+-------------------+------------------+-----------------------+
                      |                  |
                      |                  | Async Job Queue
                      v                  v
+--------------------------+    +--------------------------------+
| PDF Processing Service   |    |   Judge Worker (Docker)        |
| - PDF to Text            |    |--------------------------------|
| - Chunking               |    | - Secure Code Execution         |
| - Embeddings             |    | - Unit Tests / Pytest           |
+--------------------------+    | - Runtime Analysis               |
                      |         | - Structured JSON output         |
                      v         +--------------------------------+
+-------------------------------------------------------------+
|         POSTGRES (pgvector) â€” VECTOR & STATE STORAGE        |
|-------------------------------------------------------------|
| - CV/JD embeddings                                          |
| - Retrieved chunks                                          |
| - Agent memory (jsonb)                                      |
| - Session history                                           |
| - Code run logs                                             |
+-------------------------------------------------------------+
                      ^
                      |
+-------------------------------------------------------------+
|                 MULTI-AGENT SYSTEM (Google ADK)             |
|-------------------------------------------------------------|
| - Coordinator Agent                                         |
| - Planner Agent                                             |
| - Code Review Agent                                         |
| - Diagram Agent                                             |
| - Memory Agent                                              |
+---------------------------+---------------------------------+
                            |
                            | Heavy reasoning only
                            v
+-------------------------------------------------------------+
|                    GEMINI (via ADK)                         |
|-------------------------------------------------------------|
| - Deep Code Analysis                                        |
| - Architecture Critique                                     |
| - Behavioral Evaluation                                     |
| - Final Scorecard                                           |
+-------------------------------------------------------------+
